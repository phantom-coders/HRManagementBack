// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}


model User{
  id Int @id @default(autoincrement()) 
  name String
  email String @unique
  verified Boolean @default(false)
  password String
  admin Admin?
  mailBox MailBox[]
  createdAt DateTime @default(now())

  @@map("user")
  
}


model Admin{
  id Int @id @default(autoincrement()) 
  user User @relation(fields: [id], references: [id])
  adminPassword String
  createdAt DateTime @default(now())

  @@map("admin")
}

model MailBox{
  id Int @id @default(autoincrement()) 
  user User @relation(fields: [id], references: [id])
  mailAddress String
  mailPassword String
  mailCount Int
  mailBoxSize Int
  mailBoxSetting MailBoxSetting?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("mail_box")
}


model MailBoxSetting{
  id Int @id @default(autoincrement()) 
  mailBox MailBox @relation(fields: [id], references: [id])
  mailBoxName String
  userMaxBox Int
  boxMaxSize Int
  boxValidity Int
  reservedBoxes ReservedBox[]
  smtpServer String
  smtpMailAddress String
  smtpPassword String
  smtpPort Int
  smtpSecurity String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("mail_box_setting")
  
}

model ReservedBox{
  id Int @id @default(autoincrement()) 
  mailBoxSetting MailBoxSetting @relation(fields: [id], references: [id])
  reservedBoxEmail String
  createdAt DateTime @default(now())

  @@map("reserved_box")
}